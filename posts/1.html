<!DOCTYPE html><html lang="kr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/posts/1/1.png"/><link rel="preload" as="image" href="/posts/1/2.png"/><link rel="preload" as="image" href="/posts/1/3.png"/><link rel="stylesheet" href="/_next/static/css/1352877716939c65.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-aa4b571ace223c92.js"/><script src="/_next/static/chunks/4cb0f2ca-5cba0976cd6fc939.js" async=""></script><script src="/_next/static/chunks/996-db235982057bc13c.js" async=""></script><script src="/_next/static/chunks/main-app-39f4d6734d56ea8f.js" async=""></script><script src="/_next/static/chunks/282-676446d00e1f0e91.js" async=""></script><script src="/_next/static/chunks/app/posts/layout-84209971c6e87e3f.js" async=""></script><title>최영진의 개발 노트</title><meta name="description" content="웹 개발의 A to Z를 탐구하는 기술 블로그. 실전에서 마주한 문제들과 그 해결 과정을 공유합니다."/><meta name="google-site-verification" content="OwHKPNKdBwgpiIeHCPodU73heHdBhAoM7A9AphpQxbI"/><meta property="og:title" content="최영진의 개발 노트"/><meta property="og:description" content="웹 개발의 A to Z를 탐구하는 기술 블로그. 실전에서 마주한 문제들과 그 해결 과정을 공유합니다."/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="최영진의 개발 노트"/><meta name="twitter:description" content="웹 개발의 A to Z를 탐구하는 기술 블로그. 실전에서 마주한 문제들과 그 해결 과정을 공유합니다."/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="font-wanted"><article class="prose container min-h-screen mx-auto p-8"><a class="text-xs" href="/">&lt;<!-- --> 돌아가기</a><h1>차세대 이미지 포멧 AVIF에 관하여</h1>
<p>저는 개인적으로 만들어서 사용하는 이미지 클라우드 서비스가 있는데요.모든 이미지 파일을 <strong>PNG</strong>에서 <strong>AVIF</strong>로 전환했을 때 꽤나 큰 저장공간 절약이 있어서 공유하려고 합니다.</p>
<h2>AVIF란?</h2>
<p><strong>AVIF</strong>는 Alliance for Open Media에서 2019년에 개발한 차세대 이미지 포맷입니다.
기존의 <strong>PNG</strong>, <strong>JPEG</strong>과 같은 오래된 포맷은 물론 비교적 최근에 개발된 <strong>WEBP</strong>조차도 씹어먹을 정도의 고압축을 지원하여용량이 큰 이미지를 제공해야하는 서비스에는 참 감사한 포멧이라고 봐주시면 됩니다.</p>
<h2>PNG에서 AVIF로 전환하게된 계기</h2>
<p>이미지를 <strong>AVIF</strong>로 전환하게되면 이미지의 크기가 줄어들게 될 것을 기대했고,
이미지의 크기가 줄어들면 이미지 로딩에 걸리는 시간이 줄어드니까 사용자 경험이 더 좋아질것이라고 생각했습니다. (google cloud storage 요금이 적게나오는 것도 하나의 이점이겠네요 ㅎㅎ)</p>
<h2>전환과정</h2>
<p>그냥 무식하게 gsutil로 이미지를 가져와서 image magick으로 포맷 전환,다시 업로드하는 스크립트를 작성하여 모든 이미지를 전환했습니다.
전체 이미지의 크기는 5GiB정도 되었는데, 이걸 전부 다운 -&gt; 변환 -&gt; 업로드 를 거치니 반나절정도가 소요되었고,금액은 1700원정도 청구되었습니다.</p>
<p><img src="/posts/1/1.png" alt="google cloud storage 요금 통계표"/></p>
<h2>결과</h2>
<p>결과는 꽤 만족스러웠습니다.원래 5GiB정도 되는 전체 스토리지 크기가 2GiB정도로 크게 줄어들었습니다.</p>
<p><img src="/posts/1/2.png" alt="google cloud storage 용량 통계표"/></p>
<p>(6월 7일에 기존 파일들이 전부 휴지통으로 들어가면서 스토리지 크기가 잠깐 커졌지만, 6월 27일 이후 다 삭제하면서 스토리지 크기가 2기가로 줄었습니다)</p>
<h2>그래서 무조건 AVIF가 좋은것인가</h2>
<p>지금껏 <strong>AVIF</strong>를 찬양하기는 했지만 <strong>AVIF</strong>도 물론 단점이 있습니다.</p>
<p>일단 호환성 문제입니다.2019년에 발표된 포맷이라 지원해주는 브라우저, 소프트웨어가 한정적입니다.</p>
<p><img src="/posts/1/3.png" alt="avif 브라우저 호환 표"/></p>
<p><a href="https://caniuse.com/avif">CanIUse에서 확인해봤을 때</a> 2022년도 이전에 나온 브라우저들은 지원못하고 있는것을 확인할 수 있습니다.
사실 이 문제는 HTML5의 picture 태그를 이용하면 해결할 수 있습니다.</p>
<pre><code class="language-html">&lt;picture&gt;
  &lt;source srcset=&quot;image.avif&quot; type=&quot;image/avif&quot;&gt;
  &lt;img src=&quot;image.jpg&quot; alt=&quot;이미지 설명&quot;&gt;
&lt;/picture&gt;
</code></pre>
<p>위와 같이 picture 태그를 사용하면 <strong>AVIF</strong>를 지원하는 브라우저에서는 <strong>AVIF</strong>를 보여주고,
지원하지 않는 브라우저에서는 <strong>JPEG</strong>를 보여줄 수 있습니다.</p>
<p>두 번째는 성능 문제입니다.
<strong>AVIF</strong>는 고압축 포맷이라 성능이 낮은 디바이스에서는 <strong>JPEG</strong>보다 더 느리게 렌더링될 수 있다고 합니다.</p>
<p>제가 이번에 포맷을 변경한 서비스는 저만 사용하기 때문에 과감하게 모든 이미지를 <strong>AVIF</strong>로 변환할 수 있었지만,
실무에서 사용하려면 트레이드 오프를 고려하여 신중히 결정해야할 것 같습니다.</p>
<h2>결론</h2>
<p>제 개인 프로젝트에서 <strong>PNG</strong> 이미지들을 <strong>AVIF</strong>로 전환하면서 <strong>60%</strong> 정도의 저장공간을 절약할 수 있었습니다.
저는 <strong>AVIF</strong>가 현재는 호환도 잘 안되고 유명하지 않은 포맷이지만 시간만 더 지난다면 <strong>JPEG</strong>과 같은 사실상의 표준 포맷을 제치고 신 표준의 자리에 앉을 수 있을것이라 믿어 의심치 않습니다.
컨텐츠 서빙에 대역폭을 많이 사용하고 있는 서비스들은 한번 <strong>AVIF</strong> 사용을 진지하게 고려해봐도 좋을 것 같습니다.
읽어주셔서 감사합니다.</p></article><script src="/_next/static/chunks/webpack-aa4b571ace223c92.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/1352877716939c65.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[4289,[],\"\"]\n4:I[8523,[],\"\"]\n5:I[8009,[],\"\"]\n6:I[6282,[\"282\",\"static/chunks/282-676446d00e1f0e91.js\",\"517\",\"static/chunks/app/posts/layout-84209971c6e87e3f.js\"],\"\"]\n8:I[4108,[],\"\"]\n9:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"UzuRu1J7jfQO6TjMKAJJn\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"posts\",\"1\"],\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[\"1\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[\"1\",{\"children\":[\"__PAGE__\",{},[[\"$L3\",[[\"$\",\"h1\",null,{\"children\":\"차세대 이미지 포멧 AVIF에 관하여\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"저는 개인적으로 만들어서 사용하는 이미지 클라우드 서비스가 있는데요.모든 이미지 파일을 \",[\"$\",\"strong\",null,{\"children\":\"PNG\"}],\"에서 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"로 전환했을 때 꽤나 큰 저장공간 절약이 있어서 공유하려고 합니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"AVIF란?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"는 Alliance for Open Media에서 2019년에 개발한 차세대 이미지 포맷입니다.\\n기존의 \",[\"$\",\"strong\",null,{\"children\":\"PNG\"}],\", \",[\"$\",\"strong\",null,{\"children\":\"JPEG\"}],\"과 같은 오래된 포맷은 물론 비교적 최근에 개발된 \",[\"$\",\"strong\",null,{\"children\":\"WEBP\"}],\"조차도 씹어먹을 정도의 고압축을 지원하여용량이 큰 이미지를 제공해야하는 서비스에는 참 감사한 포멧이라고 봐주시면 됩니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"PNG에서 AVIF로 전환하게된 계기\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"이미지를 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"로 전환하게되면 이미지의 크기가 줄어들게 될 것을 기대했고,\\n이미지의 크기가 줄어들면 이미지 로딩에 걸리는 시간이 줄어드니까 사용자 경험이 더 좋아질것이라고 생각했습니다. (google cloud storage 요금이 적게나오는 것도 하나의 이점이겠네요 ㅎㅎ)\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"전환과정\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"그냥 무식하게 gsutil로 이미지를 가져와서 image magick으로 포맷 전환,다시 업로드하는 스크립트를 작성하여 모든 이미지를 전환했습니다.\\n전체 이미지의 크기는 5GiB정도 되었는데, 이걸 전부 다운 -\u003e 변환 -\u003e 업로드 를 거치니 반나절정도가 소요되었고,금액은 1700원정도 청구되었습니다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/posts/1/1.png\",\"alt\":\"google cloud storage 요금 통계표\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"결과\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"결과는 꽤 만족스러웠습니다.원래 5GiB정도 되는 전체 스토리지 크기가 2GiB정도로 크게 줄어들었습니다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/posts/1/2.png\",\"alt\":\"google cloud storage 용량 통계표\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"(6월 7일에 기존 파일들이 전부 휴지통으로 들어가면서 스토리지 크기가 잠깐 커졌지만, 6월 27일 이후 다 삭제하면서 스토리지 크기가 2기가로 줄었습니다)\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"그래서 무조건 AVIF가 좋은것인가\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"지금껏 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"를 찬양하기는 했지만 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"도 물론 단점이 있습니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"일단 호환성 문제입니다.2019년에 발표된 포맷이라 지원해주는 브라우저, 소프트웨어가 한정적입니다.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/posts/1/3.png\",\"alt\":\"avif 브라우저 호환 표\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"https://caniuse.com/avif\",\"children\":\"CanIUse에서 확인해봤을 때\"}],\" 2022년도 이전에 나온 브라우저들은 지원못하고 있는것을 확인할 수 있습니다.\\n사실 이 문제는 HTML5의 picture 태그를 이용하면 해결할 수 있습니다.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-html\",\"children\":\"\u003cpicture\u003e\\n  \u003csource srcset=\\\"image.avif\\\" type=\\\"image/avif\\\"\u003e\\n  \u003cimg src=\\\"image.jpg\\\" alt=\\\"이미지 설명\\\"\u003e\\n\u003c/picture\u003e\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"위와 같이 picture 태그를 사용하면 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"를 지원하는 브라우저에서는 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"를 보여주고,\\n지원하지 않는 브라우저에서는 \",[\"$\",\"strong\",null,{\"children\":\"JPEG\"}],\"를 보여줄 수 있습니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"두 번째는 성능 문제입니다.\\n\",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"는 고압축 포맷이라 성능이 낮은 디바이스에서는 \",[\"$\",\"strong\",null,{\"children\":\"JPEG\"}],\"보다 더 느리게 렌더링될 수 있다고 합니다.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"제가 이번에 포맷을 변경한 서비스는 저만 사용하기 때문에 과감하게 모든 이미지를 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"로 변환할 수 있었지만,\\n실무에서 사용하려면 트레이드 오프를 고려하여 신중히 결정해야할 것 같습니다.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"결론\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"제 개인 프로젝트에서 \",[\"$\",\"strong\",null,{\"children\":\"PNG\"}],\" 이미지들을 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"로 전환하면서 \",[\"$\",\"strong\",null,{\"children\":\"60%\"}],\" 정도의 저장공간을 절약할 수 있었습니다.\\n저는 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\"가 현재는 호환도 잘 안되고 유명하지 않은 포맷이지만 시간만 더 지난다면 \",[\"$\",\"strong\",null,{\"children\":\"JPEG\"}],\"과 같은 사실상의 표준 포맷을 제치고 신 표준의 자리에 앉을 수 있을것이라 믿어 의심치 않습니다.\\n컨텐츠 서빙에 대역폭을 많이 사용하고 있는 서비스들은 한번 \",[\"$\",\"strong\",null,{\"children\":\"AVIF\"}],\" 사용을 진지하게 고려해봐도 좋을 것 같습니다.\\n읽어주셔서 감사합니다.\"]}]],null],null],null]},[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"1\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[null,[\"$\",\"article\",null,{\"className\":\"prose container min-h-screen mx-auto p-8\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"text-xs\",\"children\":[\"\u003c\",\" 돌아가기\"]}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}]],null],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1352877716939c65.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"kr\",\"children\":[\"$\",\"body\",null,{\"className\":\"font-wanted\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L7\"],\"globalErrorComponent\":\"$8\",\"missingSlots\":\"$W9\"}]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"최영진의 개발 노트\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"웹 개발의 A to Z를 탐구하는 기술 블로그. 실전에서 마주한 문제들과 그 해결 과정을 공유합니다.\"}],[\"$\",\"meta\",\"4\",{\"name\":\"google-site-verification\",\"content\":\"OwHKPNKdBwgpiIeHCPodU73heHdBhAoM7A9AphpQxbI\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"최영진의 개발 노트\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"웹 개발의 A to Z를 탐구하는 기술 블로그. 실전에서 마주한 문제들과 그 해결 과정을 공유합니다.\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"최영진의 개발 노트\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"웹 개발의 A to Z를 탐구하는 기술 블로그. 실전에서 마주한 문제들과 그 해결 과정을 공유합니다.\"}]]\n3:null\n"])</script></body></html>